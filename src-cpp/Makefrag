
CC:=g++

SRCS=$(wildcard src-cpp/*.cpp)
OBJS=$(SRCS:src-cpp/%.cpp=$(GEN_DIR)/cpp/%.obj)

$(GEN_DIR)/libadc-cape.so: $(OBJS)
	@echo 'LD	$@ $<'
	@$(CC) $(LFLAGS) -shared $^ -o $@
	
memory_test: $(OBJS)
	@echo 'LD	$@ $<'
	@$(CC) $(LFLAGS) $^ -o $@

$(GEN_DIR)/cpp/%.obj: src-cpp/%.cpp
	@mkdir -p $(GEN_DIR)/cpp
	@echo 'G++	$<'
	@$(CC) $(CFLAGS) $^ -o $@