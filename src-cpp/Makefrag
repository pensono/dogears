
CC:=g++

SRCS=$(wildcard src-cpp/*.cpp)
OBJS=$(SRCS:src-cpp/%.cpp=$(GEN_DIR)/cpp/%.o)

$(GEN_DIR)/libadc-cape.a: $(OBJS) $(GEN_DIR)/pru/code.bin
	@echo 'AR	$@ <= $^'
	@ar rcs $@ $^
	
test_rpmsg: $(OBJS)
	@echo 'LD	$@ <= $^'
	@$(CC) $(LFLAGS) $^ -o $@

$(GEN_DIR)/cpp/%.o: src-cpp/%.cpp
	@mkdir -p $(GEN_DIR)/cpp
	@echo 'G++	$@ <= $^'
	@$(CC) $(CFLAGS) -fPIC $< -o $@

$(GEN_DIR)/cpp/cape.o: include/adc_cape/cape.h